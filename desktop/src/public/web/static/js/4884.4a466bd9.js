"use strict";(self.webpackChunknogle_react_boilerplate=self.webpackChunknogle_react_boilerplate||[]).push([[4884],{10597:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.thirdPartyPaymentCategory=void 0,t.thirdPartyPaymentCategory={PERSONAL_TRANSFER:"PERSONAL_TRANSFER",DEBIT_CARD:"DEBIT_CARD",SCRATCH_CARD:"SCRATCH_CARD",THIRD_PARTY_PAYMENT:"THIRD_PARTY_PAYMENT"}},54282:function(e,t,a){var i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.depositAmountSchema=m,t.getValidationSchema=function(e){let{service:t,is3rdPartyDeposit:a,amountLimit:i,selectedThirdrdPartyBank:r,legalMinValue:s,legalMaxValue:u,depositTemplate:c,isScratchCardNormal:y,decimalPlaces:f,isInrPersonalTransfer:h}=e;const{depositName:P,depositImage:g,remarks:T}=c;let b=n.object({depositamt:m({is3rdPartyDeposit:a,mustbedecimalamount:null==r?void 0:r.mustbedecimalamount,mustbeintegeramount:null==r?void 0:r.mustbeintegeramount,limit:null==i?void 0:i[null==r?void 0:r.thirdpartypaymentid],legalMinValue:s,legalMaxValue:u,decimalPlaces:f}),orderbarcode:n.string().default("").required().min(1,(0,l.i18nVariables)(o.i18n["validate.length.limit"],{min:1,max:128})).max(128,(0,l.i18nVariables)(o.i18n["validate.length.limit"],{min:1,max:128})),ordertoken:n.string().default("").required().min(1,(0,l.i18nVariables)(o.i18n["validate.length.limit"],{min:1,max:50})).max(50,(0,l.i18nVariables)(o.i18n["validate.length.limit"],{min:1,max:50})),cardSerial:n.string().default("").required(),cardCode:n.string().default("").required()});if(P&&P.ecEnable){let e=n.string().default("");d.InrPersonalTransferPaymentTypes[t]||(e=e.matches(p.notContainSymbol,{excludeEmptyString:!0,message:o.i18n.notcontainssymbol})),P.parameterRequired&&(e=e.required()),b=b.shape({depositname:e})}return g&&g.ecEnable&&g.parameterRequired&&(b=b.shape({depositimage:n.string().default("").nullable().required()})),T&&T.ecEnable&&T.parameterRequired&&(b=b.shape({remarks:n.string().default("").required()})),y&&(b=b.shape({cardSerial:n.string().default("").required(),cardCode:n.string().default("").required()})),b};var n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=u(t);if(a&&a.has(e))return a.get(e);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var o=n?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(i,r,o):i[r]=e[r]}return i.default=e,a&&a.set(e,i),i}(a(53209)),r=i(a(93776)),o=a(49595),l=a(31529),s=a(90476),p=a(34093),d=a(74374);function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(u=function(e){return e?a:t})(e)}function m(e){let{is3rdPartyDeposit:t,mustbedecimalamount:a,mustbeintegeramount:i,legalMinValue:p,legalMaxValue:d,limit:u,decimalPlaces:m=2}=e,c=n.number().nullable().default(null);return 0!==p&&(c=c.min(p,"".concat(o.i18n["validate.number.should.below"]," ").concat((0,s.formatMoney)(p)))),0!==d&&(c=c.max(d,"".concat(o.i18n["validate.number.and.upto"]," ").concat((0,s.formatMoney)(d)))),c.test((function(e){if(null===e)return this.createError({path:this.path,message:o.i18n["validate.empty"]});if(isNaN(e))return this.createError({path:this.path,message:o.i18n["validate.is.numeric"]});const n=new r.default(e);return t&&a&&n.isInteger()?this.createError({path:this.path,message:o.i18n["validate.decimal.amount"]}):t&&i&&!n.isInteger()?this.createError({path:this.path,message:o.i18n["validate.integer.amount"]}):(t?n.minus(n.times(u.processingfeepct/100).plus(u.processingfeeconst)):n).isPositive()?!(n.decimalPlaces()>m)||this.createError({path:this.path,message:(0,l.i18nVariables)(o.i18n["validate.decimal.places"],{NUMBER:m})}):this.createError({path:this.path,message:o.i18n["validate.actual.amount.positive"]})}))}},53299:function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(67294),n=a(43393);t.default=e=>{let{currThirdrdPartyBankList:t,thirdpartypaymentid:a}=e;return{channelList:(0,i.useMemo)((()=>t?(0,n.fromJS)(t).reduce(((e,t)=>{const a=t.get("thirdpartypaymentid");return e.has(a)||(e=e.set(a,(0,n.Map)({thirdpartypaymentid:a,thirdpartypaymentcode:t.get("thirdpartypaymentcode"),thirdpartypaymentbankcode:t.get("thirdpartypaymentbankcode"),langthirdpartypaymentdisplayname:t.get("langthirdpartypaymentdisplayname"),amountsuggest:t.get("amountsuggest"),suggestamounts:t.get("suggestamounts")}))),e}),(0,n.OrderedMap)()).valueSeq().toJS():[]),[t]),bankList:(0,i.useMemo)((()=>t?(0,n.fromJS)(t).groupBy((e=>e.get("thirdpartypaymentid"))).get(a,(0,n.List)()):(0,n.List)()),[t,a])}}},79211:function(e,t,a){var i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(a(59713)),r=a(67294),o=i(a(14920)),l=i(a(21794)),s=a(16833);function p(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function d(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?p(Object(a),!0).forEach((function(t){(0,n.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):p(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}t.default=e=>{let{legalMinValue:t,legalMaxValue:a,initialValues:i,setInitialValues:n}=e;const[p,u]=(0,o.default)({init:!1,scratchCards:null,availableAmounts:null}),m=e=>{if(p.init){const r=p.scratchCards.find((t=>t.cardType===e)).cardAmounts.filter((e=>(0===t||e>=t)&&(0===a||e<=a)));n(d(d({},i),{},{cardType:e,depositamt:null,cardSerial:"",cardCode:""})),u({availableAmounts:r})}};return(0,r.useEffect)((()=>{!p.init&&i.thirdpartypaymentid&&(async()=>{const{payload:e}=await(0,s.getScratchCards)(),r=e[0],o=r.cardAmounts.filter((e=>(0===t||e>=t)&&(0===a||e<=a)));u({init:!0,scratchCards:e,availableAmounts:o}),n(d(d({},i),{},{cardType:r.cardType,depositamt:null}))})()}),[p.init,i.thirdpartypaymentid]),(0,l.default)((()=>{m(i.cardType)}),[t,a]),{init:p.init,scratchCards:p.scratchCards,availableAmounts:p.availableAmounts,changeCardType:m}}},93662:function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(67294);t.default=e=>{let{selectedThirdrdPartyBank:t,amountLimit:a,legalMinValue:n,legalMaxValue:r}=e;return(0,i.useMemo)((()=>Array.isArray(null==t?void 0:t.fixedamounts)?t.fixedamounts.filter((e=>{const i=a[t.thirdpartypaymentid];return e-(e*(i.processingfeepct/100)+i.processingfeeconst)>0&&(0===n||e>=n)&&(0===r||e<=r)})).map((e=>({label:e,value:e}))):null),[t,a,n,r])}},6463:function(e,t,a){var i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){const{service:e}=(0,p.useParams)(),t=(0,p.useHistory)(),[a,i]=(0,m.default)({step:1,init:!1,paymentNotes:null,depositApplyInfo:null,amountLimit:null,paymentType:null,thirdrdPartyBankList:null,currThirdrdPartyBankList:null,selectedThirdrdPartyBank:null,collections:null,selectedCollection:null,depositUuid:null,postscript:null,depositPaymentTypeName:null,serviceExtra:{},formKey:(new Date).getTime(),initialValues:{},paymentTemplate:null,paymentFailed:!1,deposittimelimit:null,countdownFinish:!1,newDepositId:null}),r=(0,y.default)(O.getPaymentNotes),M=(0,y.default)(D.getDepositApplyInfo),w=(0,y.default)(C.getAmountLimit),I=(0,y.default)(S.getDepositPaymentTypes),L=(0,y.default)(C.getEpayments),B=(0,y.default)(D.getCollections),j=(0,y.default)(D.getDepositUuid),x=(0,y.default)(D.getDepositPostscript),F=(0,y.default)(S.getDepositMethodDisplay),Y=(0,y.default)(V.getDepositTime),q=(0,y.default)(D.getPaymentInfoTemplate),H=(0,y.default)(D.addDeposit),K=(0,o.useRef)(null),U=(0,o.useMemo)((()=>{var e,t,i,n,r;return a.initialValues.methodPayment===P.paymentSectionTypeEnum.BANK_PERSONAL_TRANSFER&&null!==(e=a.paymentTemplate)&&void 0!==e&&null!==(t=e.personalAccount[0])&&void 0!==t&&t.parameters?a.paymentTemplate.personalAccount[0].parameters.reduce(((e,t)=>(e[t.parameterCode]=t,e)),{}):null!==(i=a.paymentTemplate)&&void 0!==i&&i.thirdPartyPayment&&null!==(n=a.paymentTemplate)&&void 0!==n&&null!==(r=n.thirdPartyPayment[0])&&void 0!==r&&r.parameters?a.paymentTemplate.thirdPartyPayment[0].parameters.reduce(((e,t)=>(e[t.parameterCode]=t,e)),{}):{}}),[a.paymentTemplate,a.initialValues.methodPayment]),{category:z,depositType:J,subPaymentType:W,is3rdPartyDeposit:X,isCompanyDeposit:Q,paymentSectionTypes:G}=(0,o.useMemo)((()=>{if(a.init){const{is3rdPartyDeposit:t,isCompanyDeposit:i}=(0,T.checkMethodDepositType)(a.initialValues.methodPayment);let n;return n=a.initialValues.methodPayment===P.paymentSectionTypeEnum.BANK_PERSONAL_TRANSFER?E.thirdPartyPaymentCategory.PERSONAL_TRANSFER:[P.depositPaymentTypes.DEBIT_CARD,P.depositPaymentTypes.QR_BANK].includes(e)?E.thirdPartyPaymentCategory.DEBIT_CARD:a.initialValues.methodPayment===P.paymentSectionTypeEnum.NORMAL&&e===P.depositPaymentTypes.SCRATCHCARD?E.thirdPartyPaymentCategory.SCRATCH_CARD:E.thirdPartyPaymentCategory.THIRD_PARTY_PAYMENT,{category:n,depositType:(0,T.getDepositTypeByPaymentSectionType)(a.initialValues.methodPayment,e),subPaymentType:(0,T.getSubPaymentTypeByPaymentSectionType)(a.initialValues.methodPayment,e),is3rdPartyDeposit:t,isCompanyDeposit:i,paymentSectionTypes:(0,T.getAvailablePaymentSectionTypes)(a.paymentType)}}return{category:null,depositType:null,subPaymentType:null,is3rdPartyDeposit:null,isCompanyDeposit:null,paymentSectionTypes:null}}),[e,a.init,a.initialValues.methodPayment,a.paymentType]),{legalMinValue:Z,legalMaxValue:$,minInfo:ee,maxInfo:te}=(0,o.useMemo)((()=>{let e=0,t=0;if(a.depositApplyInfo){var i;const{mindepositamt:n,maxdepositamt:r}=a.depositApplyInfo;let o=0,l=0;if(X&&a.amountLimit[null===(i=a.selectedThirdrdPartyBank)||void 0===i?void 0:i.thirdpartypaymentid]){const e=a.amountLimit[a.selectedThirdrdPartyBank.thirdpartypaymentid];o=e.mindepositamt,l=e.maxdepositamt}else!X&&a.selectedCollection&&(o=a.selectedCollection.mindepositamt,l=a.selectedCollection.maxdepositamt);0!==n&&0!==o?e=n>=o?n:o:0===n&&0!==o?e=o:0===o&&0!==n&&(e=n),0!==r&&0!==l?t=r<=l?r:l:0===r&&0!==l?t=l:0===l&&0!==r&&(t=r)}return{legalMinValue:e,legalMaxValue:t,minInfo:0!==e?(0,b.i18nVariables)(f.i18n.depositOnlineAmountRuleMin,{MIN:(0,v.formatMoney)(e)}):"",maxInfo:0!==t?(0,b.i18nVariables)(f.i18n.depositOnlineAmountRuleMax,{MAX:(0,v.formatMoney)(t)}):""}}),[a.depositApplyInfo,a.amountLimit,a.selectedThirdrdPartyBank,a.selectedCollection,X]),ae=(0,o.useMemo)((()=>{var e,t;return null!==(e=a.depositApplyInfo)&&void 0!==e&&e.allowmultiplependingdeposit?a.depositApplyInfo.hasdeposit&&[P.paymentSectionTypeEnum.BANK_PLAYER_TRANSFER,P.paymentSectionTypeEnum.BANK_PERSONAL_TRANSFER].includes(a.initialValues.methodPayment):null===(t=a.depositApplyInfo)||void 0===t?void 0:t.hasdeposit}),[a.depositApplyInfo,a.initialValues.methodPayment]),ie=(0,o.useMemo)((()=>{var e;return(null===(e=a.depositApplyInfo)||void 0===e?void 0:e.hasdeposit)&&Q}),[a.depositApplyInfo,Q]),ne=(0,o.useMemo)((()=>a.initialValues.methodPayment===P.paymentSectionTypeEnum.NORMAL&&e===P.depositPaymentTypes.SCRATCHCARD),[a.initialValues.methodPayment]),re=(0,o.useCallback)((e=>{e!==a.initialValues.methodPayment&&i({initialValues:{methodPayment:e,depositamt:""},serviceExtra:{}})}),[a.initialValues,i]),oe=(0,o.useMemo)((()=>(0,A.getValidationSchema)({service:e,is3rdPartyDeposit:X,amountLimit:a.amountLimit,selectedThirdrdPartyBank:a.selectedThirdrdPartyBank,depositTemplate:U,legalMinValue:Z,legalMaxValue:$,isScratchCardNormal:ne})),[X,a.amountLimit,a.selectedThirdrdPartyBank,U,Z,$,ne]),le=(0,o.useCallback)((e=>{i({initialValues:e})}),[i]),se=(0,o.useCallback)((e=>{let{thirdpartypaymentid:t,thirdpartypaymentcode:n,thirdpartypaymentbankcode:r}=e;if(t!==a.initialValues.thirdpartypaymentid||n!==a.initialValues.thirdpartypaymentcode||r!==a.initialValues.thirdpartypaymentbankcode){const e=a.currThirdrdPartyBankList.find((e=>e.thirdpartypaymentid===t&&e.thirdpartypaymentcode===n&&e.thirdpartypaymentbankcode===r));i({selectedThirdrdPartyBank:e,initialValues:k(k({},a.initialValues),{},{thirdpartypaymentid:t,thirdpartypaymentcode:n,thirdpartypaymentbankcode:r})})}}),[a.initialValues,a.currThirdrdPartyBankList,i]),pe=(0,o.useCallback)((e=>{if(e!==a.initialValues.caccountid){const t=a.collections.find((t=>t.caccountid===e));i({selectedCollection:t,initialValues:k(k({},a.initialValues),{},{caccountid:e})})}}),[a.initialValues,a.collections,i]),de=(0,o.useCallback)((()=>{const e=a.step-1;e&&i({step:e})}),[a.step,i]),ue=(0,o.useCallback)((async r=>{if(1===a.step){if(X){let{depositamt:t,methodPayment:a}=r,o=(0,n.default)(r,R);o.orderamt=t,o.returnurl=c.isMobile?"".concat(window.location.origin).concat(h.default.FINANHISTORYDEPOSIT):"".concat(window.location.origin).concat(h.default.DEPOSITLIST),o.depositPaymentTypeEnum=e,i({initialValues:r}),l.default.set("onlinedeposit",JSON.stringify(o)),window.open("".concat(window.location.origin).concat(h.default.DEPOSITSERVICEONLINEPOPUP.replace(":service",e)),"_blank",function(e){const t=["WXPAY","HLB"].includes(e.thirdpartypaymentbankcode),a={toolbar:0,scrollbars:0,resizable:"yes",top:250,left:250,width:t?500:1e3,height:t?550:800};let i="";for(let e in a)i+=",".concat(e,"=").concat(a[e]);return i=i.substr(1),i}(o))}else if(Q){var o;const e=c.isMobile?[]:await Y(P.depositPaymentTypes.COMPANY_DEPOSIT);i({step:2,initialValues:k(k({},r),{},{postscript:a.postscript}),deposittimelimit:null===(o=e[0])||void 0===o?void 0:o.timelimit})}}else if(2===a.step){let n;r.methodPayment===P.paymentSectionTypeEnum.BANK_PLAYER_TRANSFER&&(n=P.depositTypesEnum["BANK_PLAYER_".concat(e.toUpperCase())]),r.methodPayment===P.paymentSectionTypeEnum.BANK_PERSONAL_TRANSFER&&(n=P.depositTypesEnum["BANK_PERSONAL_".concat(e.toUpperCase())]);const o=(0,s.default)().valueOf(),l={deposittype:n,playerdeposittime:o,depositimagesize:0,depositid:a.depositUuid,caccountid:r.caccountid,depositamt:r.depositamt,depositname:r.depositname||"",postscript:r.postscript,remarks:r.remarks||""};r.depositimage&&(l.depositimage=r.depositimage,l.depositimagesize=r.depositimage.size),H(l).then((a=>{N&&_(l.depositid,l.depositamt),c.isMobile?t.push("".concat(h.default.DEPOSIT3RDPARTYPAYMENTADD.replace(":service",e),"/").concat(a)):i({step:3,initialValues:k(k({},r),{},{playerdeposittime:o}),newDepositId:a})}))}}),[a.step,X,a.depositUuid,i]),me=(0,o.useCallback)((()=>{i({countdownFinish:!0})}),[i]);return(0,d.default)((()=>{(async()=>{const[t,a,n,o,l,s,p]=await Promise.all([r(P.platformType.desktop).then((e=>e.data.reduce(((e,t)=>(e[t.deposittype]=t.content,e)),{}))),M({includecollectionaccounts:!1}),w({depositPaymentTypeEnum:e}),I({depositPaymentTypeEnum:e}),f.i18n["deposit.payment.type.".concat(e)]?f.i18n["deposit.payment.type.".concat(e)]:F().then((t=>{var a;return null===(a=t.find((t=>t.depositPaymentTypeEnum===e)))||void 0===a?void 0:a.paymentTypeDisplayName[f.currLocale]})),q({templatePaymentType:e}),x({templatePaymentType:g.templatePaymentTypeEnum[e]||null}).then((e=>e.postscript))]),d=(0,T.getDefaultMethodPayment)(o);i({init:!0,paymentNotes:t,depositApplyInfo:a,amountLimit:n,paymentType:o,postscript:p,depositPaymentTypeName:l,paymentTemplate:s,initialValues:{methodPayment:d,depositamt:""}})})()})),(0,u.default)((()=>{X?(async()=>{const t=a.thirdrdPartyBankList?a.thirdrdPartyBankList:await L(e),n=t.filter((e=>(e.subpaymenttype&W)>0)),r=n[0];i({thirdrdPartyBankList:t,currThirdrdPartyBankList:n,selectedThirdrdPartyBank:r,initialValues:k(k({},a.initialValues),{},{thirdpartypaymentid:r.thirdpartypaymentid,thirdpartypaymentbankcode:r.thirdpartypaymentbankcode,thirdpartypaymentcode:r.thirdpartypaymentcode})})})():!1===X&&(async()=>{const t=a.initialValues.methodPayment===P.paymentSectionTypeEnum.BANK_PLAYER_TRANSFER?P.companyAccountPaymentTypes[P.depositPaymentTypes.COMPANY_DEPOSIT]:P.companyAccountPaymentTypes[e],[n,r]=await Promise.all([B({paymenttype:t,showfrozen:!1,shownotallowthirdpartytransfer:t!==P.companyAccountPaymentTypes[P.depositPaymentTypes.COMPANY_DEPOSIT]}),j()]);i({collections:n,selectedCollection:n[0],depositUuid:r,initialValues:k(k({},a.initialValues),{},{caccountid:n[0].caccountid})})})()}),[X,a.initialValues.methodPayment,W]),(0,o.useEffect)((()=>{l.default.remove("paymentSuccess"),l.default.remove("paymentFailed"),l.default.remove("paymentSkipCountDown"),l.default.remove("thirdpartypaymentData");const a=async()=>{if(!0===l.default.get("paymentSuccess")){var a;if("object"==typeof l.default.get("thirdpartypaymentData")){const{thirdpartypaymentOrderNo:e,depositAmount:t}=l.default.get("thirdpartypaymentData");N&&K.current!==e&&(_(e,t),K.current=e)}const t=await Y(e);i({step:2,deposittimelimit:null===(a=t[0])||void 0===a?void 0:a.timelimit})}!0===l.default.get("paymentFailed")&&i({paymentFailed:!0}),!0===l.default.get("paymentSkipCountDown")&&t.push(h.default.DEPOSITLIST)};return window.addEventListener("storage",a),()=>{window.removeEventListener("storage",a)}}),[]),k(k({},a),{},{schema:oe,service:e,category:z,depositType:J,subPaymentType:W,is3rdPartyDeposit:X,isCompanyDeposit:Q,legalMinValue:Z,legalMaxValue:$,minInfo:ee,maxInfo:te,paymentSectionTypes:G,notAllowDeposit:ae,notAllowCompanyDeposit:ie,isScratchCardNormal:ne,depositTemplate:U,setInitialValues:le,changeMethodPayment:re,changeSelectedThirdrdPartyBank:se,changeCollection:pe,onCountDownFinish:me,onBack:de,onSubmit:ue})};var n=i(a(6479)),r=i(a(59713)),o=a(67294),l=i(a(45773)),s=i(a(30381)),p=a(39711),d=i(a(70902)),u=i(a(21794)),m=i(a(14920)),c=a(14283),y=i(a(55762)),f=a(49595),h=i(a(55233)),P=a(74374),g=a(47005),T=a(69010),b=a(31529),v=a(90476),A=a(54282),E=a(10597),S=a(49683),O=a(75393),D=a(16833),C=a(64696),V=a(11461);const R=["depositamt","methodPayment"];function M(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function k(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?M(Object(a),!0).forEach((function(t){(0,r.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):M(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}const{afterDepositEvent:N}=a(8516),_=(e,t)=>{const a={firstdeposit:l.default.get("firstdeposit"),playerid:l.default.get("playerid"),transactionId:e,depositamt:t,currency:l.default.get("currency")};N(a)}}}]);