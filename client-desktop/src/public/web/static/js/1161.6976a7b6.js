"use strict";(self.webpackChunknogle_react_boilerplate=self.webpackChunknogle_react_boilerplate||[]).push([[1161],{71128:function(e,t,r){var n=r(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getOwnedRewardRecord=t.getActivityPoints=void 0;var a=n(r(17673)),o=(n(r(2246)),n(r(82814))),i=r(14283),l=(r(49595),r(53878));i.isMobile,t.getActivityPoints=()=>(0,o.default)({url:"".concat(l.baseURL,"/rewardActivity/pointBalance"),method:"GET"}),t.getOwnedRewardRecord=e=>(0,o.default)({url:"".concat(l.baseURL,"/roulette/personalRecord?").concat(a.default.stringify(e)),method:"GET"})},44154:function(e,t,r){var n=r(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.claimReward=t.getAllRewardRecord=t.getRewardDetail=void 0;var a=n(r(17673)),o=n(r(82814)),i=r(53878),l=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=u(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=a?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}return n.default=e,r&&r.set(e,n),n}(r(24038));function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(u=function(e){return e?r:t})(e)}t.getRewardDetail=()=>(0,o.default)({url:"".concat(i.baseURL,"/roulette/inProgress"),method:"GET"}),t.getAllRewardRecord=e=>(0,o.default)({url:"".concat(i.baseURL,"/roulette/rewardRecord?").concat(a.default.stringify(e)),method:"GET"}),t.claimReward=e=>({types:[l.POST_CLAIM_REWARD,l.POST_CLAIM_REWARD_SUCCESS,l.POST_CLAIM_REWARD_FAILURE],promiseType:"",promises:[()=>(0,o.default)({url:"".concat(i.baseURL,"/roulette/drawRecord"),method:"POST",jsonStr:JSON.stringify({drawCount:e})})]})},42650:function(e,t,r){var n=r(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(59713)),o=(n(r(45697)),n(r(67294))),i=n(r(54087)),l=r(31529);function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){(0,a.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}class d extends o.default.PureComponent{constructor(){super(...arguments),(0,a.default)(this,"state",{items:[]}),(0,a.default)(this,"updateTop",(()=>{const e=this.state.items.map((e=>{const t=e.top+e.gravity;return t>e.maxTop?this.randomItemState():s(s({},e),{},{top:t})}));this.setState({items:e},(()=>{(0,i.default)(this.updateTop)}))}))}componentDidMount(){const{imgUrl:e}=this.props;if(e){const t=new Image;t.onload=()=>{this.setState(this.getInitialState(t.width,t.height),(()=>{(0,i.default)(this.updateTop)}))},t.src=e}}componentWillUnmount(){i.default.cancel(this.updateTop)}getInitialState(e,t){const{quantity:r}=this.props,n=[];for(let a=0;a<r;a++)n.push(this.randomItemState(e,t));return{items:n,imageWidth:e,imageHeight:t}}randomItemState(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state.imageWidth,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state.imageHeight;const{zIndex:r,gravity:n,minSize:a,maxSize:o,maxImageWidth:i}=this.props,u=window.document.body.offsetWidth,s=(0,l.randomFloatFromInterval)(a,o,2),d=e>i?parseInt(i*s,10):parseInt(e*s,10),c=parseInt(t/e*d,10),f=-c,p=s+(o-s)/2;return{left:(0,l.randomFloatFromInterval)(0,u-d,0),top:f,maxTop:screen.height+c,zIndex:parseInt(r*s,10),gravity:n*s,brightness:p,width:d}}itemRenderer(){const{imgUrl:e,onClick:t}=this.props,{items:r}=this.state;return r.map(((r,n)=>{let{width:a,zIndex:i,top:l,left:u,brightness:s}=r;return o.default.createElement("img",{key:n,alt:"red",src:e,width:a,style:{position:"fixed",cursor:"pointer",zIndex:i,top:l,left:u,filter:"brightness(".concat(s,")")},onMouseDown:t})}))}render(){return o.default.createElement("div",null,this.itemRenderer())}}d.defaultProps={gravity:5,minSize:.3,maxSize:1,zIndex:1e3,maxImageWidth:180,quantity:20};var c=d;t.default=c},24038:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.POST_CLAIM_REWARD_FAILURE=t.POST_CLAIM_REWARD_SUCCESS=t.POST_CLAIM_REWARD=void 0,t.POST_CLAIM_REWARD="roulette/POST_CLAIM_REWARD",t.POST_CLAIM_REWARD_SUCCESS="roulette/POST_CLAIM_REWARD_SUCCESS",t.POST_CLAIM_REWARD_FAILURE="roulette/POST_CLAIM_REWARD_FAILURE"},73699:function(e,t,r){var n=r(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.formatPoint=t.formatBankCard=t.currencySymbol=t.formatEncryptMobile=t.formatEncryptName=t.formatBankAccount=void 0;var a=n(r(83868)),o=r(90476);t.formatBankAccount=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;if(!e)return"";const n=e.length;if((0,a.default)(e)){const t=e.lastIndexOf(".");return e.substr(0,r)+e.substr(r,t-r).replace(/./g,"*")+e.substr(t,n-t)}const o=16,i=n-t,l="".concat(e.substr(0,i).replace(/./g,"*")).concat(e.substr(i,t));return l.length<o?l.padStart(o,"*"):l},t.formatEncryptName=e=>{if(!e)return"";const t=/(?:[\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u3005\u3007\u3021-\u3029\u3038-\u303B\u3400-\u4DBF\u4E00-\u9FFC\uF900-\uFA6D\uFA70-\uFAD9]|\uD81B[\uDFF0\uDFF1]|[\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD869[\uDC00-\uDEDD\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])/.test(e)?1:3,r=e.length-t,n="".concat(e.substr(0,t)).concat(e.substr(t,r).replace(/./g,"*"));return n.length<6?n.padEnd(6,"*"):n},t.formatEncryptMobile=e=>{if(!e)return"";const[t,r]=e.split(" "),n=r.length-4;return"".concat(t," ").concat(r.substr(0,n).replace(/./g,"*")).concat(r.substr(n,4))},t.currencySymbol=e=>({CNY:"¥",USD:"$",THB:"฿",VND2:"₫",HKD:"$"}[e]||""),t.formatBankCard=e=>"string"!=typeof e?e.toString().match(/.{4}/g).join(" "):e.match(/.{4}/g).join(" "),t.formatPoint=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,o.formatMoney)(e,"0,0.00",t)}},65352:function(e,t,r){var n=r(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(67294),o=r(43393),i=r(37424),l=r(39711),u=n(r(21794)),s=r(55233),d=n(r(14920)),c=r(14283),f=r(31529),p=n(r(55762)),y=r(44154),m=r(71128);t.default=function(){let{toggleLoginPopup:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=(0,l.useHistory)(),r=(0,i.useSelector)((e=>e.players.logined)),n=(0,i.useSelector)((e=>e.dashboard.ecDisplaySetting.ecDisplayMission)),g=(0,p.default)(y.claimReward),[v,w]=(0,d.default)({init:!1,rewardDetail:null,currentRewards:null,currentRewardCount:null,ownedRewardRecord:null,allRewardRecord:null,loading:!1,animation:!1,ownedRewards:null,rewardIndex:null,isOpen:!1,tab:0,activityPoints:null,times:null,rollTimes:null,noData:!1,renderKey:Date.now()}),h=()=>{c.isDesktop?e():t.push(s.paths.LOGIN,{path:s.paths.LUCKYWHEEL})},b=async()=>{const[e,t,r]=await Promise.all([(0,m.getOwnedRewardRecord)({offset:0,limit:100}),(0,y.getAllRewardRecord)({offset:0,limit:100,rouletteId:v.rewardDetail.get("rouletteId")}),(0,m.getActivityPoints)()]),n=r.payload.activityPoints,a=Math.floor(n/v.rewardDetail.get("activityConsumingPoint")),i=a>10?10:a;return{ownedRewardRecord:(0,o.fromJS)(null==e?void 0:e.payload),allRewardRecord:(0,o.fromJS)(t.payload),activityPoints:n,times:a,rollTimes:i}},R=async e=>{if(r){if(!(v.times<e||v.animation)){w({isOpen:!1,loading:!0,animation:!0,rewardIndex:null});try{const{rewards:t}=await g(e),{ownedRewardRecord:r,allRewardRecord:n,activityPoints:a,times:i,rollTimes:l}=await b(),u=(0,o.fromJS)(t),s=u.getIn([0,"rewardId"]),d=v.currentRewards.findIndex((e=>e.get("rewardId")===s));w({loading:!1,rewardIndex:d,ownedRewards:u,ownedRewardRecord:r,allRewardRecord:n,activityPoints:a,times:i,rollTimes:l}),await(0,f.delayPromise)(2e3),w({animation:!1,isOpen:!0,renderKey:Date.now()})}catch(e){const{ownedRewardRecord:t,allRewardRecord:r,activityPoints:n,times:a,rollTimes:o}=await b();w({loading:!1,animation:!1,ownedRewardRecord:t,allRewardRecord:r,activityPoints:n,times:a,rollTimes:o})}}}else h()};return(0,a.useEffect)((()=>{(async()=>{const[e,t,n]=await Promise.all([(0,y.getRewardDetail)(),r&&(0,m.getOwnedRewardRecord)({offset:0,limit:100}),r&&(0,m.getActivityPoints)()]);if(!Array.isArray(e.payload.rewards))return void w({init:!0,noData:!0});const a=await(0,y.getAllRewardRecord)({offset:0,limit:100,rouletteId:e.payload.rouletteId}),i=(0,o.fromJS)(e.payload),l=i.get("rewards").sortBy((e=>e.get("rewardOrder"))),u=r?n.payload.activityPoints:null,s=r?Math.floor(u/i.get("activityConsumingPoint")):null,d=s&&s>10?10:s;w({init:!0,rewardDetail:i,currentRewards:l,currentRewardCount:l.size,ownedRewardRecord:r?(0,o.fromJS)(null==t?void 0:t.payload):null,allRewardRecord:(0,o.fromJS)(a.payload),activityPoints:u,times:s,rollTimes:d})})()}),[]),(0,u.default)((()=>{r&&(async()=>{const[e,t]=await Promise.all([r&&(0,m.getOwnedRewardRecord)({offset:0,limit:100}),r&&(0,m.getActivityPoints)()]),n=t.payload.activityPoints,a=Math.floor(n/v.rewardDetail.get("activityConsumingPoint")),i=a>10?10:a;w({ownedRewardRecord:(0,o.fromJS)(null==e?void 0:e.payload),activityPoints:n,times:a,rollTimes:i})})()}),[r]),(0,u.default)((()=>{1!==v.tab||r||h()}),[v.tab,r]),{logined:r,state:v,setState:w,getLuckyDraw:R,ecDisplayMission:n}}},73552:function(e,t,r){var n=r(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(59713)),o=r(67294),i=r(29881);function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){(0,a.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}t.default=(e,t)=>{const{isSlider:r,limit:n,visible:a,height:l}=t,s=e.size||0,d=(0,o.useMemo)((()=>e.map(((e,t)=>e.set("index",t)))),[]),c=r&&s>=n,f=a,p=(0,o.useRef)(),[y,m]=(0,i.useSetState)({offset:void 0,list:void 0,slider:!1,renderKey:Date.now()});return(0,i.useLifecycles)((()=>{s&&m((e=>u(u({},e),{},{offset:0})))}),(()=>{p.current&&clearTimeout(p.current)})),(0,i.useUpdateEffect)((()=>{let e,t;const r=y.offset+f;c&&r>s?(e=r-s,t=[...d.slice(y.offset,s),...d.slice(0,e)]):t=d.slice(y.offset,s),p.current=setTimeout((()=>{m({slider:!1,list:t,renderKey:Date.now()})}),800)}),[y.offset]),(0,i.useUpdateEffect)((()=>{c&&(p.current=setTimeout((()=>{m((e=>{let t=e.offset+1;return t>=s&&(t=0),u(u({},e),{},{slider:!0,offset:t})}))}),1200))}),[y.list]),{list:y.list,translateStyle:{transform:"translate3d(0, -".concat(y.slider?l:0,"px, 0)")},renderKey:y.renderKey}}},88020:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.getRewardContent=void 0;var n=r(49595),a=r(31529),o=r(90476),i=r(74374);t.getRewardContent=e=>{switch(e.get("rewardType")){case i.rouletteRewardTypeEnum.FIXED_REWARD:case i.rouletteRewardTypeEnum.RANDOM_REWARD:return(0,o.formatMoney)(e.getIn(["rewardContent","amount"]));case i.rouletteRewardTypeEnum.ACTIVITY_POINTS:return"".concat(e.getIn(["rewardContent","activityPoints"])," ").concat(n.i18n["activity.points"]);case i.rouletteRewardTypeEnum.PRODUCT_GIFT:case i.rouletteRewardTypeEnum.NO_PRIZE:return(0,a.getName)(e.get("rewardName"));default:return""}}},70378:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=d(r(45697)),o=r(67294),i=d(o),l=d(r(85218)),u=d(r(94184)),s=d(r(41143));function d(e){return e&&e.__esModule?e:{default:e}}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var f=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));if(r.onKeyDownHandler=function(e){switch(e.keyCode){case 13:e.preventDefault(),r.props.onEnter()}},r.onChangeHandler=function(){var e=r.props.onChange;r.isValidator&&r.validate(),e(r.getInputValue())},r.getInputValue=function(){return r.refs.input.value},r.setInputValue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.initialValue,t=r.refs.input;t.value=e},r.validate=function(){var e=r.getInputValue(),t=r.validator.map((function(t){return t(e)})),n=((0,l.default)(e)||"string"==typeof e&&!e)&&t.every((function(e){return!!e}));return r.setState({isValid:n,validateDetail:t}),n},r.initialValue=e.defaultValue||"",r.isValidator=!!e.inputOptions.rule,r.info=e.inputOptions.info||"",r.isValidator){(0,s.default)(!!e.inputOptions.rule.validator,"If rule is given, must have validator(function returns boolean)");var n=e.inputOptions.rule.validator,a=e.inputOptions.rule.tip||"",o=Array.isArray(n),i=Array.isArray(a);r.validator=o?n:[n],r.tip=i?a:[a]}return r.state={value:r.initialValue,isValid:!0,validateDetail:[]},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"render",value:function(){var e,t=this.props,r=t.defaultValue,n=t.inputOptions,a=t.inputSpan,o=t.className,l=t.name,s=t.style,d=t.readOnly,f=t.max,p=t.min,y=t.placeholder,m=this.state,g=m.isValid,v=m.validateDetail,w=n.status,h=n.invalidTipClassname,b=(c(e={"nrc-form-input":!0},"nrc-u-"+a,!!a),c(e,"readOnly",d),e),R={invalid:"invalid"===w||!g,readOnly:d},O=this.tip&&this.tip.filter((function(e,t){return!v[t]})),D="function"==typeof this.info?this.info():this.info;return i.default.createElement("div",{className:(0,u.default)(b)+" "+o},i.default.createElement("input",{id:l,defaultValue:r,style:s,className:(0,u.default)(R),type:"text",ref:"input",maxLength:16,onChange:this.onChangeHandler,disabled:d,min:p,max:f,placeholder:y,onKeyDown:this.onKeyDownHandler}),i.default.createElement("small",{className:g?"info-msg":"invalid-msg"},g?null:h?i.default.createElement("i",{className:h}):null,g?D:"function"==typeof O[0]?O[0]():O[0]))}}]),t}(o.Component);f.displayName="InputNumber",f.propTypes={className:a.default.string,defaultValue:a.default.oneOfType([a.default.number,a.default.string]),max:a.default.oneOfType([a.default.number,a.default.string]),min:a.default.oneOfType([a.default.number,a.default.string]),onChange:a.default.func,onEnter:a.default.func,disabled:a.default.bool,style:a.default.object,inputOptions:a.default.object,inputSpan:a.default.string,isRequired:a.default.bool,readOnly:a.default.bool,name:a.default.string,placeholder:a.default.string,invalidTipClassname:a.default.string},f.defaultProps={className:"",disabled:!1,inputSpan:"1-1",name:"",onChange:function(){},onEnter:function(){},style:{}},t.default=f},80634:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=c(r(45697)),o=r(67294),i=c(o),l=c(r(94184)),u=r(37163),s=r(56448),d=c(r(61160));function c(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var y=function(e){function t(){return f(this,t),p(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"render",value:function(){var e=this.props,t=e.className,r=e.style,n=function(e){var t=void 0;try{return t=(0,u.convertFromRaw)((0,d.default)(e)),(0,s.convertDraftToHTML)(t)}catch(r){return t=u.ContentState.createFromText(e),(0,s.convertDraftToHTML)(t)}}(e.defaultValue);return i.default.createElement("div",{className:(0,l.default)({"nrc-editor-view-mode":!0})+" "+t,style:r,dangerouslySetInnerHTML:{__html:n}})}}]),t}(o.Component);y.propTypes={defaultValue:a.default.string,className:a.default.string,style:a.default.object},y.defaultProps={defaultValue:"",className:"",style:{}},t.default=y},61160:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n,a=r(56448),o=(n=r(79981))&&n.__esModule?n:{default:n};t.default=function(e){var t=void 0;try{t=JSON.parse(e)}catch(r){t=(0,o.default)((0,a.convertHTMLToDraft)(e))}return t}},85218:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,a.default)(e),""!==e&&o.test(e)};var n,a=(n=r(65571))&&n.__esModule?n:{default:n},o=/^[-+]?([0-9]+|\.[0-9]+|[0-9]+\.[0-9]+)$/;e.exports=t.default}}]);