"use strict";(self.webpackChunknogle_react_boilerplate=self.webpackChunknogle_react_boilerplate||[]).push([[120],{74480:function(e,t,a){var i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(a(67154)),r=i(a(67294)),l=i(a(11931));t.default=e=>{const t=(t,a)=>{const i=(0,l.default)();return r.default.createElement(e,(0,n.default)({ref:a,agentDomain:i},t))};return r.default.forwardRef(t)}},56356:function(e,t,a){var i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(a(67154)),r=i(a(59713)),l=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=E(t);if(a&&a.has(e))return a.get(e);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var l=n?Object.getOwnPropertyDescriptor(e,r):null;l&&(l.get||l.set)?Object.defineProperty(i,r,l):i[r]=e[r]}return i.default=e,a&&a.set(e,i),i}(a(67294)),c=a(37424),o=a(96974),u=i(a(17563)),s=i(a(14920)),d=i(a(21794)),g=i(a(86258)),p=a(2246),f=i(a(11931)),m=i(a(36603)),y=a(12477),h=i(a(17947)),v=a(29751),b=i(a(55233)),S=a(40146),P=a(74374),w=a(31529),k=i(a(23197)),I=i(a(55762)),C=a(14283),O=a(74179),A=i(a(54069)),M=a(24502);function E(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(E=function(e){return e?a:t})(e)}function j(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function U(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?j(Object(a),!0).forEach((function(t){(0,r.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):j(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}const{afterSignupFirstTypingId:F}=a(8516),R=(0,k.default)();t.default=e=>(0,o.withRouter)((t=>{const a=u.default.parse(t.history.location.search),i=(0,c.useDispatch)(),r=(0,I.default)(t.checkAffiliateWithAlert),[o,k]=(0,l.useState)(!1),[E,j]=(0,s.default)({captcha:null,captchauuid:null,agreePolicy:!0,showSignPopUpModal:!1,showAgreePolicyModal:!1,shouldCheckAgreePolicy:!1,showSignupSuccessModal:!1,isOpenedShowSignPopUp:!1,account:void 0,captchaEmpty:!1,idImgUrl:void 0,bankImgUrl:void 0,showImgUrl:void 0,title:void 0,mobile:"",validateCodeEmpty:!1,validateCode:"",newIdImgFile:void 0,newBankImgFile:void 0}),L=(0,l.useRef)(null),V=(0,l.useRef)(null),z=(0,l.useRef)(!1),_=(0,l.useRef)({affiliateid:!1,ulagentaccount:!1,agentid:!1,playerid:!1}),D=(0,l.useRef)(!1),T=(0,c.useSelector)((e=>e.players.getRegSettingSuccess)),x=(0,f.default)(),[B,N]=(0,l.useState)(),[W,G]=(0,l.useState)(),[H,q]=(0,l.useState)(),K=t.registrationSetting.get("bindAffiliateUlAgentEnable"),J=(0,l.useMemo)((()=>{const{isLoading:e=!1,agentLoading:a,affiliateLoading:i,staticpagesMap:n,registrationSetting:r}=t,l=n.get("SignupList"),c=n.get("SignupMap");let o=R;r.get("currentauth")===P.authVerifyTypeEnum.OTP&&(o=o.filter((e=>"cn"===e.iso2)));const u=!(null==l||!l.find((e=>"userAgreement"===e.get("code"))));return{isidLoading:e||a||i,requireMobileValidate:r.getIn(["regsettingmap","mobile","validate"])&&r.getIn(["mobileValidation","blockRegister"]),SignupMap:c,securitylevel:r.get("securitylevel"),isNeedCheckAgreePolicy:u,agreePolicyCode:"userAgreement",mobileAuthOnlyContury:o,isidTyping:()=>Object.keys(_.current).some((e=>!0===_.current[e]))}}),[t.isLoading,t.agentLoading,t.affiliateLoading,t.staticpagesMap,t.registrationSetting,_.current,R]),Q=(0,l.useCallback)((e=>{let t=E.validateCodeEmpty;E.validateCode&&!e?t=!0:e&&(t=!1),j({validateCode:e,validateCodeEmpty:t})}),[E.validateCodeEmpty,E.validateCode]),X=(0,l.useCallback)((e=>{let{captcha:t,captchauuid:a}=e,i=E.captchaEmpty;E.captcha&&!t?i=!0:t&&(i=!1),j({captcha:t,captchauuid:a,captchaEmpty:i})}),[E.captchaEmpty,E.captcha,j]),Y=(0,l.useCallback)((e=>{if(K&&_.current.affiliateid)return;const{registrationSetting:a,getPlayersLookup:i}=t,n=a.getIn(["regsettingmap","playerid","prefixchar"])||"",r=Number(a.getIn(["regsettingmap","playerid","maxlength"]))-n.length,l=Number(a.getIn(["regsettingmap","playerid","minlength"]))-n.length,c=e.length;!D.current&&F&&(D.current=!0,F()),clearTimeout(V.current),_.current.playerid||(_.current=U(U({},_.current),{},{playerid:!0})),c>=l&&c<=r&&(e=n+e,V.current=setTimeout((()=>{_.current=U(U({},_.current),{},{playerid:!1}),i(e)}),1500),j({account:e}))}),[V.current,D.current,_.current.playerid,j,t.registrationSetting,t.getPlayersLookup]),Z=(0,l.useCallback)(((e,t,a)=>{if(K){const{affiliateid:e}=L.current.getFormItems();if(e||y.affiliateCookie.get()||G(y.ulagentCookie.get()),_.current.affiliateid)return}clearTimeout(V.current),_.current[t]||(_.current=U(U({},_.current),{},{[t]:!0})),V.current=setTimeout((()=>{_.current=U(U({},_.current),{},{[t]:!1}),e&&a(e).then((e=>{if(K){const{affiliateid:t}=L.current.getFormItems();e&&e.payload.ulAgentAccount&&t&&G(e.payload.ulAgentAccount)}}))}),1500)}),[V.current,_.current,j,K]),$=(0,l.useCallback)(((e,t,a)=>{K&&_.current.affiliateid||(clearTimeout(V.current),e&&a(e),_.current=U(U({},_.current),{},{[t]:!1}))}),[V.current,_.current,j,K]),ee=(0,l.useCallback)((e=>{E.showAgreePolicyModal||t.staticpagesMap.getIn(["SignupMap",e,"content"])||t.getStaticPageContent({type:"SignUp",code:e}),j({showAgreePolicyModal:!E.showAgreePolicyModal})}),[j,E.showAgreePolicyModal,t.staticpagesMap,t.getStaticPageContent]);return(0,g.default)((()=>{t.clearPlayersLookup()})),(0,l.useEffect)((()=>{const e=t.staticpagesMap.getIn(["SignupMap","signpopup"]);e&&e.size>0&&!E.isOpenedShowSignPopUp&&(e.get("content")?j({showSignPopUpModal:!0,isOpenedShowSignPopUp:!0}):t.getStaticPageContent({type:"SignUp",code:"signpopup"}))}),[t.staticpagesMap]),(0,l.useEffect)((()=>{if(!T)return;let e=!1;const n=t.registrationSetting.get("agreementcheck");j({agreePolicy:n,shouldCheckAgreePolicy:!n});const l=K&&!y.affiliateCookie.get()?"":a.affiliate||t.affiliateid;if(l&&r(l).then((t=>{K&&t.ulAgentAccount&&(e=!0,G(t.ulAgentAccount)),q(l),(0,y.setCookie)("affiliate",l,S.affiliateExpireTime)})).catch((e=>t.history.replace(b.default.SIGNUP))),x.isAgentDomain)return x.isUlagent?G(x.account):N(x.agentId),void k(!0);const c=y.ulagentCookie.get(),o=y.agentCookie.get(),u=[c?i((0,M.isAgentExist)(c,!0)):Promise.resolve(),o?i((0,M.isAgentExist)(o,!1)):Promise.resolve()];Promise.all(u).then((t=>{let[a,i]=t;e||G(a),N(i)})).finally((()=>{k(!0)}))}),[T,x]),(0,d.default)((()=>{const e=t.playersLookup.indexOf(E.account)>-1;z.current=e,L.current&&L.current.customizedValidate({customizedValidates:["playerid"]})}),[t.playersLookup]),(0,m.default)((()=>{j({showSignupSuccessModal:!0})}),[t.signupSuccess]),(0,m.default)((()=>{L.current&&L.current.customizedValidate({customizedValidates:["affiliateid"]})}),[t.affiliateSuccess,t.affiliateFailed]),(0,m.default)((()=>{L.current&&L.current.customizedValidate({customizedValidates:["agentid"]})}),[t.agentSuccess,t.agentFailed]),(0,m.default)((()=>{L.current&&L.current.customizedValidate({customizedValidates:["ulagentaccount"]})}),[t.ulagentSuccess,t.ulagentFailed]),(0,m.default)((()=>{var e,t;const a=null===(e=L.current)||void 0===e||null===(t=e.refs)||void 0===t?void 0:t.compositeComponent;a&&a.resetCaptcha(),j({validateCode:""})}),[t.showGlobal498Msg]),o&&l.default.createElement(e,(0,n.default)({},t,{ref:L,onChangeSecure:X,onIdChange:Z,onIdBlur:$,onChangeAccount:Y,toggleAgreePolicyModal:ee,onPicImgUpload:async(e,t)=>{const a=await(e=>new Promise((t=>{const a=new FileReader;a.onload=e=>{t(e.target.result)},a.readAsDataURL(e)})))(e),i=await(0,w.getResizedImg)({file:e});j({newIdImgFile:"idImgUrl"===t?i:E.newIdImgFile,newBankImgFile:"bankImgUrl"===t?i:E.newBankImgFile,[t]:a})},onUploadFileDelete:(e,t)=>{j({[e]:void 0,[t]:void 0})},onShowUploadImg:(e,t)=>{j({showImgUrl:e,title:t})},checkResultAffiliate:e=>!(_.current.affiliateid||(0,A.default)(e)||t.affiliateSuccess)&&t.affiliateFailed,checkResultAgent:e=>!(_.current.agentid||(0,A.default)(e)||t.agentSuccess)&&t.agentFailed,checkUlagentSearchSuggest:e=>!(_.current.ulagentaccount||(0,A.default)(e)||t.ulagentSuccess)&&t.ulagentFailed,checkAccount:()=>!!_.current.playerid||!z.current,onChangeValidateCode:Q,onRegister:()=>{const{captcha:e,captchauuid:a,account:i,validateCode:n,newIdImgFile:r,newBankImgFile:l}=E,{registrationSetting:c}=t,{getFormItems:o,validate:u}=L.current,s=c.getIn(["regsettingmap","captcha","display"])&&(!e||!a),d=c.getIn(["regsettingmap","mobile","validate"])&&c.getIn(["mobileValidation","blockRegister"])&&!n;if(!u()||s||d||t.showGlobal498Msg)return s&&!e&&j({captchaEmpty:!0}),d&&j({validateCodeEmpty:!0}),!1;const g=!!B||!!W,f=!!H,m=o(),y=U(U({},m),{},{portalid:C.isMobile?P.portalIdEnum.MOBILE:P.portalIdEnum.DESKTOP,birthday:void 0,birthdate:m.birthday?m.birthday.startValue:void 0,currency:p.defaultCurrency,captcha:e,captchauuid:a,playerid:i,pic1:r,pic2:l,pic1size:r?r.size:void 0,pic2size:l?l.size:void 0,verificationcode:n});y.firstname&&(y.firstname=y.firstname.trim()),g&&B&&(y.agentid=B),g&&W&&(y.ulagentaccount=W),f&&(y.affiliateid=H),y.pin&&(y.pin=(0,h.default)(y.pin,y.playerid)),y.password=(0,h.default)(y.password,y.playerid),delete y.confirmpassword,(0,v.getFingerprint2)((e=>{y.regfingerprint=e,t.registerUser((0,w.deleteEmptyValue)(y)).then((e=>{200===(null==e?void 0:e.code)&&O.adjustEvent.registration()}))}))},setSignupState:j,fromAffiliate:!!H,fromAgent:!!B||!!W,affiliateId:H,agentId:B,ulagentAccount:W,signupState:E,renderProps:J,recoverUlagentAccountState:()=>{K&&W&&!H&&G(y.ulagentCookie.get())}}))}))},36603:function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];const n=(0,i.useRef)(t);(0,i.useEffect)((()=>{let a;return t.some(((e,t)=>e&&!n.current[t]))&&(a=e()),n.current=t,a}),[...t,...a])};var i=a(67294)},96213:function(e,t,a){var i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.gameHistoryStatusOptions=t.currencyOptions=void 0;var n=i(a(2246)),r=a(49595);const l=(n.default.currencies?n.default.currencies:[n.default.defaultCurrency]).map((e=>({value:e,label:r.i18n[e]||e})));t.currencyOptions=l;const c=[{value:-1,label:r.i18n.all},{value:0,label:r.i18n.settled},{value:1,label:r.i18n.processing},{value:2,label:r.i18n["system.canceled"]},{value:5,label:r.i18n.rejected},{value:6,label:r.i18n.void},{value:8,label:r.i18n["player.canceled"]}];t.gameHistoryStatusOptions=c}}]);