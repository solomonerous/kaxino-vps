"use strict";(self.webpackChunknogle_react_boilerplate=self.webpackChunknogle_react_boilerplate||[]).push([[1494],{77535:function(e,t,a){var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=p(t);if(a&&a.has(e))return a.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var l=i?Object.getOwnPropertyDescriptor(e,r):null;l&&(l.get||l.set)?Object.defineProperty(n,r,l):n[r]=e[r]}return n.default=e,a&&a.set(e,n),n}(a(67294)),r=a(80831),l=n(a(94184)),u=n(a(98812)),o=n(a(23729)),s=a(49595),c=a(14283),d=n(a(2246));function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(p=function(e){return e?a:t})(e)}const f=["ABCDEF","GHI","JKLMN","OPQRST","UVWXYZ"];t.default=e=>{const{onBankChange:t,banks:a,groups:n=f,is3rdParty:p,name:m,closeDrawer:b}=e,{valueKey:g,labelKey:y,imageKey:h}=p?{valueKey:"thirdpartypaymentbankcode",labelKey:"langbankname",imageKey:"imagename"}:{valueKey:"bankid",labelKey:"bankname",imageKey:"bankimage"},{values:v,setFieldTouched:k}=(0,r.useFormikContext)(),D=(0,r.getIn)(v,m),{popular:C,bankOptions:E}=(0,i.useMemo)((()=>{const e={},t=[],i={};n.forEach(((t,a)=>{i[t]={};for(const n of t.toUpperCase())e[n]=a})),i.OTHERS={},a.forEach((a=>{a.ispopular&&t.push(a);const r=a.banknamefirstletter.toUpperCase(),l=n[e[r]]||"OTHERS";void 0===i[l][r]&&(i[l][r]=[]),i[l][r].push(a)}));const r=Object.entries(i).reduce(((e,t)=>{const[a,n]=t,i=Object.entries(n).sort(((e,t)=>e[0]>t[0]?1:e[0]<t[0]?-1:0));if(!i.length)return e;const r=i.reduce(((e,t)=>{const[a,n]=t;return[...e,{label:a,options:n}]}),[]);return[...e,{label:"OTHERS"===a?s.i18n["deposit.type.other"]:a,options:r}]}),[]);return{popular:t,bankOptions:r}}),[a,n]),O=e=>e.map((e=>i.default.createElement("div",{key:e.label},i.default.createElement("div",{className:"mc-bank-letter"},e.label),i.default.createElement("div",{className:"mc-banks"},e.options.map((e=>(e=>{const a=e[h],n=s.i18n["yabo.deposit.".concat(y,".").concat(e[y])]||e[y],r=e[g];return i.default.createElement("div",{key:r,className:(0,l.default)("mc-bank-item",{actived:D===r}),onClick:a=>{a.stopPropagation(),k(m,!0),b(),t&&t(e,r)}},p?i.default.createElement("div",{className:"mc-bank-image name-only"},n):i.default.createElement(i.default.Fragment,null,i.default.createElement("div",{className:"mc-bank-image"},a&&i.default.createElement("img",{src:"".concat(d.default.portal.apiServer.imageServer).concat(a),alt:n})),i.default.createElement("div",{className:"mc-bank-name"},n)))})(e)))))));return 0===(null==E?void 0:E.length)?null:i.default.createElement("div",{className:(0,l.default)("mc-bank-group-list",{mobile:c.isMobile,desktop:!c.isMobile})},i.default.createElement(u.default,null,C.length>0&&i.default.createElement(o.default,{index:"popular",key:"popular",tab:s.i18n["bank.card.popular.banks"],className:"mc-bank-field"},O([{label:s.i18n["bank.card.popular.banks"],options:C}])),E.map((e=>i.default.createElement(o.default,{key:e.label,index:e.label,tab:e.label,className:"mc-bank-field"},O(e.options))))))}},95129:function(e,t,a){var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(77535));a(30217);var r=i.default;t.default=r},73699:function(e,t,a){var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.formatPoint=t.formatBankCard=t.currencySymbol=t.formatEncryptMobile=t.formatEncryptName=t.formatBankAccount=void 0;var i=n(a(83868)),r=a(90476);t.formatBankAccount=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;if(!e)return"";const n=e.length;if((0,i.default)(e)){const t=e.lastIndexOf(".");return e.substr(0,a)+e.substr(a,t-a).replace(/./g,"*")+e.substr(t,n-t)}const r=16,l=n-t,u="".concat(e.substr(0,l).replace(/./g,"*")).concat(e.substr(l,t));return u.length<r?u.padStart(r,"*"):u},t.formatEncryptName=e=>{if(!e)return"";const t=/(?:[\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u3005\u3007\u3021-\u3029\u3038-\u303B\u3400-\u4DBF\u4E00-\u9FFC\uF900-\uFA6D\uFA70-\uFAD9]|\uD81B[\uDFF0\uDFF1]|[\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD869[\uDC00-\uDEDD\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])/.test(e)?1:3,a=e.length-t,n="".concat(e.substr(0,t)).concat(e.substr(t,a).replace(/./g,"*"));return n.length<6?n.padEnd(6,"*"):n},t.formatEncryptMobile=e=>{if(!e)return"";const[t,a]=e.split(" "),n=a.length-4;return"".concat(t," ").concat(a.substr(0,n).replace(/./g,"*")).concat(a.substr(n,4))},t.currencySymbol=e=>({CNY:"¥",USD:"$",THB:"฿",VND2:"₫",HKD:"$"}[e]||""),t.formatBankCard=e=>"string"!=typeof e?e.toString().match(/.{4}/g).join(" "):e.match(/.{4}/g).join(" "),t.formatPoint=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,r.formatMoney)(e,"0,0.00",t)}},50606:function(e,t,a){var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.useBankCardForm=t.useBankCardList=void 0;var i=n(a(59713)),r=a(67294),l=a(37424),u=n(a(70902)),o=n(a(45773)),s=a(43393),c=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=F(t);if(a&&a.has(e))return a.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var l=i?Object.getOwnPropertyDescriptor(e,r):null;l&&(l.get||l.set)?Object.defineProperty(n,r,l):n[r]=e[r]}return n.default=e,a&&a.set(e,n),n}(a(53209)),d=a(34093),p=a(16833),f=a(26061),m=a(74374),b=a(49595),g=n(a(17947)),y=a(31529),h=a(31315),v=n(a(83868)),k=n(a(24986)),D=n(a(94583)),C=n(a(13927)),E=n(a(19675)),O=n(a(55762)),S=n(a(43810));function F(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(F=function(e){return e?a:t})(e)}function w(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function P(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?w(Object(a),!0).forEach((function(t){(0,i.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):w(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}const j=1048576;t.useBankCardList=e=>{const{playerInfoReady:t}=(0,S.default)((e=>({playerInfoReady:e.players.playerInfoReady}))),[a,n]=(0,r.useState)(!1),[i,l]=(0,r.useState)({}),[o,s]=(0,r.useState)(!1),[c,d]=(0,r.useState)([]),[b,g]=(0,r.useState)({}),y=(0,O.default)(p.getBankCards),h=(0,O.default)(f.getBankCardSetting),v=(0,r.useMemo)((()=>c.length<b.portalcount),[c,b]),k=(0,r.useCallback)((e=>{const t=c.find((t=>t.paymentid===e));l(t),s(!0)}),[c]),D=(0,r.useCallback)((()=>{const{togglePlayerInfoPopup:a}=e;t.get(m.playerInfoReadyEnum.BANKCARDADD).every((e=>e))?s(!0):a(m.playerInfoReadyEnum.BANKCARDADD)}),[t,e]),C=(0,r.useCallback)((()=>{l({}),s(!1)}),[]),E=(0,r.useCallback)((()=>{y().then((e=>{d((null==e?void 0:e.data)||[])})).finally((()=>{n(!1)}))}),[y]);return(0,u.default)((()=>{n(!0),E(),h().then((e=>{g(e)}))})),{loading:a,editCardData:i,isCardEdit:o,isAddAllowed:v,bankCards:c,bankCardSetting:b,getCards:E,onCardEdit:k,onCardAdd:D,closeEdit:C}};const M=e=>({bankaccountname:()=>(e=>{var t;let{registrationSetting:a,bankCardSetting:n}=e;const{required:i,alloweditwhencreate:r}=(null==n||null===(t=n.bankcardsettingmap)||void 0===t?void 0:t.bankaccountname)||{};return r?(0,d.getFirstnameSchema)({required:i,firstNameSetting:null==a?void 0:a.getIn(["regsettingmap","firstname"])}):c.string().default("").max(50,(0,y.i18nVariables)(b.i18n["validate.check.length.limit"],{MIN:1,MAX:50}))})(e),bankid:()=>c.string().default(""),bankbranch:()=>c.string().default("").max(75,(0,y.i18nVariables)(b.i18n["validate.check.length.limit"],{MIN:1,MAX:75})).matches(d.notContainSymbol,{excludeEmptyString:!0,message:b.i18n["validate.special.character"]}),bankaccount:e=>c.string().default("").test((function(t){const a=e.allowsymbol,n=e.alphabet,i=e.numeric,r=e.email,l=e.maxlength,u=e.minlength,o=e.required,s=r?b.i18n["validate.bankacouunt.email"]:"",c=(0,h.isValidLength)(t,u,l)&&!(0,h.hasWhiteSpace)(t),d=(0,h.isValidLength)(t,u,l)&&(0,D.default)(t)&&!(0,h.hasSpecialCharacter)(t)&&!(0,h.hasWhiteSpace)(t),p=(0,k.default)(t)&&(0,h.isValidLength)(t,u,l),f=(0,v.default)(t);return o&&!t?this.createError({path:this.path,message:b.i18n["validate.empty"]}):!i||r||n||a||p?r&&i&&!f&&!p?this.createError({path:this.path,message:(0,y.i18nVariables)(b.i18n["validate.bankaccount"],{min:u,max:l,emailtip:s})}):i&&n&&!d?this.createError({path:this.path,message:(0,y.i18nVariables)(b.i18n["validate.alphanumeric.bankaccount"],{min:u,max:l,emailtip:s})}):!(a&&!c)||this.createError({path:this.path,message:(0,y.i18nVariables)(b.i18n["validate.alphanumeric.bankaccount"],{min:u,max:l,emailtip:s})}):this.createError({path:this.path,message:(0,y.i18nVariables)("".concat(b.i18n["validate.bankaccount"],", ").concat(b.i18n["validate.white.space"]),{min:u,max:l,emailtip:s})})})),activationprovince:()=>c.string().default("").max(50,(0,y.i18nVariables)(b.i18n["validate.check.length.limit"],{MIN:1,MAX:50})).matches(d.notContainSymbol,{excludeEmptyString:!0,message:b.i18n["validate.special.character"]}).test((function(e){return!h.chineseLocale.includes(b.currLocale)||!(0,h.hasWhiteSpace)(e)||this.createError({path:this.path,message:b.i18n["validate.white.space"]})})).matches(d.notContainWhitespace,{excludeEmptyString:!0,message:b.i18n["validate.white.space"]}),activationcity:()=>c.string().default("").max(50,(0,y.i18nVariables)(b.i18n["validate.check.length.limit"],{MIN:1,MAX:50})).matches(d.notContainSymbol,{excludeEmptyString:!0,message:b.i18n["validate.special.character"]}).test((function(e){return!h.chineseLocale.includes(b.currLocale)||!(0,h.hasWhiteSpace)(e)||this.createError({path:this.path,message:b.i18n["validate.white.space"]})})),activationmobile:()=>d.mobileSchema.default(""),activationemail:()=>d.emailSchema.default(""),activationid:e=>c.string().default("").test((function(t){const a=e.maxlength,n=e.minlength;return e.required&&!t?this.createError({path:this.path,message:b.i18n["validate.empty"]}):!(t&&!(0,h.isValidLength)(t,n,a))||this.createError({path:this.path,message:(0,y.i18nVariables)(b.i18n["validate.length.limit"],{min:n,max:a})})})),pic3:()=>(0,d.resizeUploadImageSchema)({fileSize:j}),password:()=>d.playerPasswordSchema.default("")}),A={bankaccountname:{isToUseDefault:"userealname",defaultFrom:"player",defaultValueKey:"firstname"},activationmobile:{isToUseDefault:"useregmobile",defaultFrom:"player",defaultValueKey:"mobile"},activationemail:{isToUseDefault:"useregemail",defaultFrom:"player",defaultValueKey:"email"},bankid:{isToUseDefault:"hasdefault",defaultFrom:"bankCardSetting",defaultValueKey:"defaultvalue"}},N={bankaccountname:{encryptKey:"ENCRYPT_PLAYER_NAME",editCheckingKey:"bankAccountNameModified"},bankaccount:{encryptKey:"ENCRYPT_PLAYER_BANK_ACCOUNT",editCheckingKey:"bankAccountModified"},activationmobile:{encryptKey:"ENCRYPT_PLAYER_MOBILE",editCheckingKey:"activationMobileModified"}};t.useBankCardForm=e=>{let{editCardData:t,bankCardSetting:a,closeEdit:n,getCards:i}=e;const d=(0,l.useDispatch)(),[h,v]=(0,r.useState)(!1),[k,D]=(0,r.useState)([]),[F,w]=(0,r.useState)(""),[K,B]=(0,r.useState)(!1),{player:R,financeRiskSetting:_,registrationSetting:T}=(0,S.default)((e=>({player:e.players.player,financeRiskSetting:e.settings.financeRiskSetting,registrationSetting:e.players.registrationSetting}))),V=(0,C.default)({hasField:!0}),{activeTab:x,setTab:I}=(0,E.default)("pop"),L=(0,O.default)(p.getBankCardBankList),W=(0,O.default)(p.editBankCard),U=(0,O.default)(p.addBankCard),q=(0,r.useMemo)((()=>!(null!=t&&t.paymentid)),[null==t?void 0:t.paymentid]),z=(0,r.useMemo)((()=>{const e=a.bankcardsettingmap||{};return Object.keys(e).filter((e=>"password"!==e)).some((t=>{var a,n;return(null===(a=e[t])||void 0===a?void 0:a.portalview)&&(null===(n=e[t])||void 0===n?void 0:n.editable)}))}),[a]),Y=(0,r.useMemo)((()=>{const e=a.bankcardsettingmap||{};return Object.keys(e).filter((t=>{const a=e[t];return"password"!==t||q?q?null==a?void 0:a.display:null==a?void 0:a.portalview:z}))}),[a,z,q]),H=(0,r.useMemo)((()=>Y.filter((e=>"password"!==e)).length>0),[Y]),X=!z&&!q,J=(0,r.useMemo)((()=>Y.reduce(((e,t)=>{const n=a.bankcardsettingmap[t]||{},i={name:t,label:(0,y.getName)((0,s.fromJS)(a["".concat(t,"i18n")])),isRequired:n.required,disabled:!q&&!n.editable,info:(0,y.getName)((0,s.fromJS)(a["".concat(t,"tipi18n")]))};var r,l;return["bankaccountname","activationemail","activationmobile"].includes(t)?P(P({},e),{},{[t]:P(P({},i),{},{disabled:!(null!==(r=a.bankcardsettingmap)&&void 0!==r&&r[t][q?"alloweditwhencreate":"editable"])})}):["password"].includes(t)?P(P({},e),{},{[t]:P(P({},i),{},{disabled:!1,isRequired:!q||(null===(l=a.bankcardsettingmap)||void 0===l?void 0:l.password.required)})}):P(P({},e),{},"pic3"===t?{[t]:P(P({},i),{},{enableResize:!0,customizedWidth:800,fileSize:j})}:{[t]:i})}),{})),[Y,a,q]),$=(0,r.useMemo)((()=>c.object(P({},Y.reduce(((e,t)=>{const n=J[t].isRequired,i=J[t].disabled,r=M({registrationSetting:T,bankCardSetting:a})[t],l=null==a?void 0:a.bankcardsettingmap[t];let u=!i&&r?r(l):c.mixed();return n&&(u=u.required(b.i18n["validate.empty"]).typeError(b.i18n["validate.empty"])),P(P({},e),{},{[t]:u})}),{})))),[Y,null==a?void 0:a.bankcardsettingmap,J]),G=(0,r.useMemo)((()=>{if(q)return Y.reduce(((e,t)=>{var n,i;const r=A[t]||{},l=null==r?void 0:r.isToUseDefault;if(_.get(null===(n=N[t])||void 0===n?void 0:n.encryptKey)&&(null===(i=J[t])||void 0===i||!i.disabled)&&["bankaccountname","activationmobile"].includes(t))return P(P({},e),{},{[t]:""});if(l&&a.bankcardsettingmap[t][l]){if("player"===r.defaultFrom)return P(P({},e),{},{[t]:R[r.defaultValueKey]});if("bankCardSetting"===r.defaultFrom){const n=a.bankcardsettingmap[t][r.defaultValueKey],i=k.find((e=>e.bankid===n))||{bankid:"",bankname:""};return w(i.bankid),P(P({},e),{},{[t]:i.bankname})}}return P(P({},e),{},{[t]:""})}),{});{const e=Y.reduce(((e,a)=>{var n,i;const r=t[a]||"";if(_.get(null===(n=N[a])||void 0===n?void 0:n.encryptKey)&&(null===(i=J[a])||void 0===i||!i.disabled))return P(P({},e),{},{[a]:""});if("pic3"===a){const t=r?"data:image/png;base64,".concat(r):null;return P(P({},e),{},{[a]:t})}if("bankid"===a){const n=k.find((e=>e.bankid===r))||{bankid:r,bankname:t.bankname||r};return w(n.bankid),P(P({},e),{},{[a]:n.bankname})}return P(P({},e),{},{[a]:r})}),{});return P(P({},e),{},{status:m.bankcardStatusEnum[t.status],statusClassName:"status-".concat(m.bankCardStatusKeyEnum[t.status])})}}),[q,Y,a,R,t,J,k,_]),Q=(0,r.useCallback)((()=>{q&&o.default.set("updatePlayerInfoReadySuccess",(new Date).getTime()),B(!1),n()}),[q,n]),Z=(0,r.useCallback)((()=>{B(!0),i(),d((0,f.checkPlayerInfoReady)())}),[i,f.checkPlayerInfoReady,d]),ee=(0,r.useCallback)((e=>{const a=M(),n=(0,y.deleteEmptyValue)(P({},e));if(delete n.status,delete n.statusClassName,n.bankid=F||t.bankid,n.password&&(n.password=(0,g.default)(e.password)),n.activationmobile&&(n.activationmobile=a.activationmobile().castOrDefault(e.activationmobile)),q)n.pic3&&(n.pic3size=n.pic3.size),U(n).then(Z);else{Object.keys(N).forEach((e=>{const a=t[e]||"",i=n[e]||"";n[N[e].editCheckingKey]=Y.includes(e)&&a!==i}));const{paymentid:e}=t;n.pic3&&"string"!=typeof n.pic3?W(P(P({},n),{},{bypasspic3:!1,pic3size:n.pic3.size}),e).then(Z):(n.bypasspic3=!(t.pic3&&!n.pic3),W(n,e).then(Z))}}),[q,U,t,F,W,Z,Y]);return(0,u.default)((()=>{v(!0),L().then((e=>{D(e)})).finally((()=>{v(!1)}))})),P(P({},V),{},{loading:h,activeTab:x,banks:k,fieldProps:J,initialValues:G,schema:$,isAdd:q,isModifySuc:K,isSubmitBtnExisted:H,isSubmitBtnDisabled:X,setTab:I,onSubmit:ee,closeModifySuc:Q,setCurrentBankid:w})}},13927:function(e,t,a){var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(59713)),r=a(67294),l=n(a(14920)),u=n(a(21794));function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){(0,i.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}t.default=e=>{const t=(null==e?void 0:e.timeout)||300,a=!(null==e||!e.hasField),[n,i]=(0,l.default)((()=>{const t=(null==e?void 0:e.open)||!1;return{open:t,fieldFocus:t}})),o=(0,r.useCallback)((()=>{i({open:!0,fieldFocus:!0})}),[]),c=(0,r.useCallback)((()=>{i({open:!1})}),[]),{open:d}=n;return(0,u.default)((()=>{let e=null;return a&&!d&&(e=setTimeout((()=>{i({fieldFocus:d})}),t)),()=>{e&&clearTimeout(e)}}),[d,a,t]),s(s({timeout:t},n),{},{openDrawer:o,closeDrawer:c})}},19675:function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(67294);t.default=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"1";const[t,a]=(0,n.useState)(e),i=(0,n.useCallback)((e=>{a(e)}),[]);return{activeTab:t,setTab:i}}},30217:function(e,t,a){a.r(t)}}]);